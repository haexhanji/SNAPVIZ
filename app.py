import streamlit as st
import datetime
import google.generativeai as genai

# âœ… Gemini API í‚¤ ì„¤ì •
genai.configure(api_key="AIzaSyC5VbRN66OLvUzNtbicw4KwtIUWdK08lLA")
model = genai.GenerativeModel("models/gemini-1.5-pro")

# ğŸŒ ì•± ì„¤ì • ë° ì‚¬ì´ë“œ ë©”ë‰´ êµ¬ì„±
st.set_page_config(page_title="Ora.AI â€“ ì²œì£¼êµ AI ë™ë°˜ì", layout="wide")
st.sidebar.title("ğŸ™ Ora.AI ë©”ë‰´")
menu = st.sidebar.radio("ì´ë™í•  ë©”ë‰´ë¥¼ ì„ íƒí•˜ì„¸ìš”", [
    "ğŸ  í™ˆ",
    "ğŸ“… ì „ë¡€ë ¥ ìº˜ë¦°ë”",
    "ğŸ“ ë¬µìƒ ê¸°ë„ë¬¸",
    "ğŸ™‹â€â™‚ï¸ ì„±ì¸ ì±—ë´‡ì—ê²Œ ì§ˆë¬¸í•˜ê¸°",
    "ğŸ‘¤ ë§ˆì´í˜ì´ì§€"
])

# ğŸ  í™ˆ í™”ë©´
if menu == "ğŸ  í™ˆ":
    st.title("Ora.AI âœ¨")
    st.markdown("ì²œì£¼êµ ì‹ ìë“¤ì„ ìœ„í•œ **ê¸°ë„ì™€ ë¬µìƒ, ì„±ê²½, ì „ë¡€ë ¥ ì•ˆë‚´**ë¥¼ ë„ì™€ì£¼ëŠ” AI ì•±ì…ë‹ˆë‹¤.")

# ğŸ“… ì „ë¡€ë ¥ ìº˜ë¦°ë”
elif menu == "ğŸ“… ì „ë¡€ë ¥ ìº˜ë¦°ë”":
    st.title("ğŸ“… ì˜¤ëŠ˜ì˜ ì „ë¡€ ì•ˆë‚´")
    today = datetime.date.today()
    today_str = today.strftime('%Yë…„ %mì›” %dì¼')

    with st.spinner("ì˜¤ëŠ˜ì˜ ì „ë¡€ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."):
        prompt = f"""
        ì˜¤ëŠ˜ì€ {today_str}ì…ë‹ˆë‹¤. ì²œì£¼êµ ì „ë¡€ë ¥ ê¸°ì¤€ìœ¼ë¡œ ì˜¤ëŠ˜ì€ ë¬´ìŠ¨ ì „ë¡€ì¼ì¸ê°€ìš”?
        ì–´ë–¤ ë³µìŒì´ ë‚­ë…ë˜ë©°, ê¸°ë…í•˜ëŠ” ì„±ì¸ì´ë‚˜ ì „ë¡€ìƒ‰, ì˜ë¯¸ ë“±ì„ í¬í•¨í•´ì„œ ìš”ì•½í•´ì„œ ì•Œë ¤ì£¼ì„¸ìš”.
        """
        response = model.generate_content(prompt)
        st.success(f"âœ… {today_str} ì „ë¡€ ì •ë³´")
        st.markdown(response.text)

# ğŸ“ ë¬µìƒ ê¸°ë„ë¬¸
elif menu == "ğŸ“ ë¬µìƒ ê¸°ë„ë¬¸":
    st.title("ğŸ“ ë§ì¶¤ ë¬µìƒ ê¸°ë„ë¬¸ ìƒì„±ê¸°")
    keyword = st.text_input("ğŸ™ ê¸°ë„í•˜ê³  ì‹¶ì€ ì£¼ì œ(ì˜ˆ: ë‘ë ¤ì›€, ê°ì‚¬, ìš©ì„œ ë“±)ë¥¼ ì…ë ¥í•˜ì„¸ìš”")

    if keyword:
        with st.spinner("ê¸°ë„ë¬¸ì„ ì‘ì„± ì¤‘ì…ë‹ˆë‹¤..."):
            prompt = f"""
            ì‚¬ìš©ìê°€ '{keyword}'ë¼ëŠ” ì£¼ì œë¡œ ë¬µìƒ ê¸°ë„ë¥¼ ì›í•©ë‹ˆë‹¤.
            ì§„ì‹¬ì´ ë‹´ê¸´ ì²œì£¼êµì‹ ê¸°ë„ë¬¸ì„ 5~6ë¬¸ì¥ ì´ë‚´ë¡œ ì‘ì„±í•´ ì£¼ì„¸ìš”.
            """
            response = model.generate_content(prompt)
            st.subheader("ğŸ“– ìƒì„±ëœ ê¸°ë„ë¬¸")
            st.write(response.text)

# ğŸ™‹â€â™‚ï¸ ì„±ì¸ ì±—ë´‡
elif menu == "ğŸ™‹â€â™‚ï¸ ì„±ì¸ ì±—ë´‡ì—ê²Œ ì§ˆë¬¸í•˜ê¸°":
    st.title("ğŸ™‹â€â™‚ï¸ ì„±ì¸ ì±—ë´‡ì—ê²Œ ì§ˆë¬¸í•˜ê¸°")
    user_question = st.text_area("ğŸ’¬ ë‹¹ì‹ ì˜ ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”")

    if st.button("ğŸ™ ì„±ì¸ì˜ ì§€í˜œ ë“£ê¸°") and user_question:
        with st.spinner("ì„±ì¸ì˜ ë§ì”€ì„ ì „í•˜ê³  ìˆìŠµë‹ˆë‹¤..."):
            prompt = f"""
            ë‹¹ì‹ ì€ ì²œì£¼êµì˜ ì§€í˜œë¡œìš´ ì„±ì¸ì…ë‹ˆë‹¤.
            ì‚¬ìš©ìê°€ '{user_question}'ì´ë¼ëŠ” ì§ˆë¬¸ì„ í–ˆìŠµë‹ˆë‹¤.
            1. ë¨¼ì € ë”°ëœ»í•œ ì¸ì‚¬ë¡œ ì‹œì‘í•˜ê³ ,
            2. ì„±ê²½ì—ì„œ ì˜ê°ì„ ë°›ì€ ìœ„ë¡œì™€ ì¡°ì–¸ì„ ì£¼ì„¸ìš”.
            3. ê´€ë ¨ ì„±ê²½ êµ¬ì ˆ 1~2ê°œë¥¼ í¬í•¨í•˜ê³ ,
            4. ë§ˆì§€ë§‰ì— ê¸°ë„ë¬¸ìœ¼ë¡œ ë§ˆë¬´ë¦¬í•´ ì£¼ì„¸ìš”.
            ë‹µë³€ì€ ì‹ ì•™ì ìœ¼ë¡œ ë”°ëœ»í•˜ê³ , í¬ë§ì„ ì£¼ëŠ” ì–´ì¡°ë¡œ ì‘ì„±í•´ ì£¼ì„¸ìš”.
            """
            response = model.generate_content(prompt)
            st.markdown(response.text)

# ğŸ‘¤ ë§ˆì´í˜ì´ì§€
elif menu == "ğŸ‘¤ ë§ˆì´í˜ì´ì§€":
    st.title("ğŸ‘¤ ë§ˆì´í˜ì´ì§€")
    st.write("ì‚¬ìš©ì ì„¤ì • ë° ì¦ê²¨ì°¾ê¸° ê¸°ëŠ¥ì€ ì¶”í›„ ì œê³µë  ì˜ˆì •ì…ë‹ˆë‹¤.")